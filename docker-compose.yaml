services:
  # nginx also known as server
  web:
    image: garyclarke/php-framework-web
    volumes:
      - ./public:/var/www/html/public
      # - ./server/default.conf:/etc/nginx/conf.d/default.conf
    ports:
      - "80:80"


  # php also known as application
  app:
    image: garyclarke/php-framework-app
    # build: 
    #   dockerfile: ./coder/Dockerfile

    volumes:
      # - ./app:/var/www/html
      - .:/var/www/html
      # - ./coder/xdebug.ini:/usr/local/etc/php/conf.d/xdebug.ini:ro
    # environment:
    #   MYSQL_HOST: db
    #   MYSQL_PORT: ${MYSQL_PORT}
    #   MYSQL_PASSWORD: ${MYSQL_PASSWORD}
    #   MYSQL_DATABASE: ${MYSQL_DATABASE}
    #   MYSQL_USER: ${MYSQL_USER}
      # REDIS_HOST: cache
      # REDIS_PORT: ${REDIS_PORT}
      # XDEBUG_MODE: "${XDEBUG_MODE:-off}"
    extra_hosts:
      - host.docker.internal:host-gateway

  # maraidb
  # db:
  #   image: mariadb:lts
  #   volumes:
  #     - fpro:/var/lib/mysql
  #   ports:
  #     - "3306:3306"
  #   restart: unless-stopped
  #   env_file:
  #     - database.env

  #redis
#   cache:
#     image: redis:6.0.20

# volumes:
#   fpro: